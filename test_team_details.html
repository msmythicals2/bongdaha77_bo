<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•å¢å¼ºçš„çƒé˜Ÿè¯¦æƒ…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #0d0f11;
            color: #e2e8f0;
        }
        h1 {
            color: #00e676;
        }
        .test-section {
            background: #1a1e22;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #2d3439;
        }
        button {
            background: #00e676;
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            font-weight: 600;
        }
        button:hover {
            background: #00c965;
        }
        .result {
            background: #0d0f11;
            border: 1px solid #2d3439;
            padding: 20px;
            margin-top: 15px;
            border-radius: 8px;
            max-height: 600px;
            overflow-y: auto;
        }
        .loading {
            color: #94a3b8;
            font-style: italic;
        }
        .error {
            color: #ff3b3b;
            font-weight: bold;
        }
        .success {
            color: #00e676;
            font-weight: bold;
        }
        pre {
            background: #000;
            color: #00e676;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 12px;
        }
        .info-card {
            background: rgba(0, 230, 118, 0.05);
            border: 1px solid rgba(0, 230, 118, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .info-card h3 {
            margin: 0 0 10px 0;
            color: #00e676;
        }
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .info-label {
            color: #94a3b8;
        }
        .info-value {
            color: #e2e8f0;
            font-weight: 600;
        }
        img {
            max-width: 100%;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”¬ æµ‹è¯•å¢å¼ºçš„çƒé˜Ÿè¯¦æƒ…åŠŸèƒ½</h1>
    <p>æµ‹è¯• SportMonks æä¾›çš„ä¸°å¯Œçƒé˜Ÿä¿¡æ¯</p>

    <div class="test-section">
        <h2>æµ‹è¯•çƒé˜Ÿè¯¦æƒ… API</h2>
        <p>ç‚¹å‡»æŒ‰é’®æµ‹è¯•ä¸åŒçƒé˜Ÿçš„è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…æ‹¬æ•™ç»ƒã€å¥–æ¯ã€ä¼¤ç—…ç­‰ï¼‰</p>
        
        <button onclick="testTeamDetails(33)">Manchester United (33)</button>
        <button onclick="testTeamDetails(9568)">Inter Miami CF (9568)</button>
        <button onclick="testTeamDetails(529)">Barcelona (529)</button>
        <button onclick="testTeamDetails(541)">Real Madrid (541)</button>
        <button onclick="testTeamDetails(50)">Manchester City (50)</button>
        <button onclick="testTeamDetails(2932)">Al-Hilal (2932)</button>
        <button onclick="testTeamDetails(3670)">Hanoi FC (3670)</button>
        
        <div id="result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š é¢„æœŸçœ‹åˆ°çš„æ–°ä¿¡æ¯</h2>
        <div class="info-card">
            <h3>âœ… åŸºæœ¬ä¿¡æ¯</h3>
            <div class="info-item">
                <span class="info-label">æˆç«‹å¹´ä»½</span>
                <span class="info-value">Founded year</span>
            </div>
            <div class="info-item">
                <span class="info-label">å›½å®¶</span>
                <span class="info-value">Country</span>
            </div>
            <div class="info-item">
                <span class="info-label">çƒé˜Ÿä»£ç </span>
                <span class="info-value">Team code</span>
            </div>
            <div class="info-item">
                <span class="info-label">ç±»å‹</span>
                <span class="info-value">Club/National</span>
            </div>
        </div>

        <div class="info-card">
            <h3>ğŸ‘” ä¸»æ•™ç»ƒä¿¡æ¯</h3>
            <div class="info-item">
                <span class="info-label">å§“å</span>
                <span class="info-value">Coach name</span>
            </div>
            <div class="info-item">
                <span class="info-label">ç…§ç‰‡</span>
                <span class="info-value">Coach photo</span>
            </div>
            <div class="info-item">
                <span class="info-label">å›½ç±</span>
                <span class="info-value">Nationality</span>
            </div>
            <div class="info-item">
                <span class="info-label">å¹´é¾„</span>
                <span class="info-value">Age</span>
            </div>
        </div>

        <div class="info-card">
            <h3>ğŸŸï¸ çƒåœºä¿¡æ¯</h3>
            <div class="info-item">
                <span class="info-label">çƒåœºåç§°</span>
                <span class="info-value">Stadium name</span>
            </div>
            <div class="info-item">
                <span class="info-label">åŸå¸‚</span>
                <span class="info-value">City</span>
            </div>
            <div class="info-item">
                <span class="info-label">å®¹é‡</span>
                <span class="info-value">Capacity</span>
            </div>
            <div class="info-item">
                <span class="info-label">è‰çš®ç±»å‹</span>
                <span class="info-value">Surface type</span>
            </div>
            <div class="info-item">
                <span class="info-label">åœ°å€</span>
                <span class="info-value">Full address</span>
            </div>
            <div class="info-item">
                <span class="info-label">çƒåœºç…§ç‰‡</span>
                <span class="info-value">Stadium image</span>
            </div>
        </div>

        <div class="info-card">
            <h3>ğŸ† å¥–æ¯å’Œè£èª‰</h3>
            <div class="info-item">
                <span class="info-label">è”èµ›åç§°</span>
                <span class="info-value">League name</span>
            </div>
            <div class="info-item">
                <span class="info-label">èµ›å­£</span>
                <span class="info-value">Season</span>
            </div>
            <div class="info-item">
                <span class="info-label">æ¬¡æ•°</span>
                <span class="info-value">Times won</span>
            </div>
        </div>

        <div class="info-card">
            <h3>ğŸš‘ ä¼¤ç—…/åœèµ›çƒå‘˜</h3>
            <div class="info-item">
                <span class="info-label">çƒå‘˜å§“å</span>
                <span class="info-value">Player name</span>
            </div>
            <div class="info-item">
                <span class="info-label">åŸå› </span>
                <span class="info-value">Injury/Suspension</span>
            </div>
            <div class="info-item">
                <span class="info-label">å¼€å§‹æ—¥æœŸ</span>
                <span class="info-value">Start date</span>
            </div>
            <div class="info-item">
                <span class="info-label">ç»“æŸæ—¥æœŸ</span>
                <span class="info-value">End date</span>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000';

        async function testTeamDetails(teamId) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p class="loading">æ­£åœ¨åŠ è½½çƒé˜Ÿè¯¦æƒ…: ' + teamId + '...</p>';
            
            try {
                const response = await fetch(`${API_BASE}/api/teams/${teamId}/info`);
                const data = await response.json();
                
                if (!data.team || !data.team.name) {
                    resultDiv.innerHTML = '<p class="error">æœªæ‰¾åˆ°çƒé˜Ÿä¿¡æ¯</p>';
                    return;
                }
                
                let html = '<p class="success">âœ… æˆåŠŸè·å–çƒé˜Ÿè¯¦æƒ…ï¼</p>';
                
                // Team Basic Info
                html += '<div class="info-card">';
                html += '<h3>ğŸ›¡ï¸ çƒé˜ŸåŸºæœ¬ä¿¡æ¯</h3>';
                html += `<div class="info-item"><span class="info-label">çƒé˜Ÿåç§°</span><span class="info-value">${data.team.name}</span></div>`;
                html += `<div class="info-item"><span class="info-label">æˆç«‹å¹´ä»½</span><span class="info-value">${data.team.founded || 'N/A'}</span></div>`;
                html += `<div class="info-item"><span class="info-label">å›½å®¶</span><span class="info-value">${data.team.country || 'N/A'}</span></div>`;
                html += `<div class="info-item"><span class="info-label">çƒé˜Ÿä»£ç </span><span class="info-value">${data.team.code || 'N/A'}</span></div>`;
                html += `<div class="info-item"><span class="info-label">ç±»å‹</span><span class="info-value">${data.team.national ? 'National Team' : 'Club Team'}</span></div>`;
                html += '</div>';
                
                // Coach Info
                if (data.coach) {
                    html += '<div class="info-card">';
                    html += '<h3>ğŸ‘” ä¸»æ•™ç»ƒä¿¡æ¯</h3>';
                    if (data.coach.photo) {
                        html += `<img src="${data.coach.photo}" alt="${data.coach.name}" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 10px;">`;
                    }
                    html += `<div class="info-item"><span class="info-label">å§“å</span><span class="info-value">${data.coach.name}</span></div>`;
                    html += `<div class="info-item"><span class="info-label">å›½ç±</span><span class="info-value">${data.coach.nationality || 'N/A'}</span></div>`;
                    html += `<div class="info-item"><span class="info-label">å¹´é¾„</span><span class="info-value">${data.coach.age || 'N/A'}</span></div>`;
                    html += '</div>';
                } else {
                    html += '<div class="info-card"><h3>ğŸ‘” ä¸»æ•™ç»ƒä¿¡æ¯</h3><p>æš‚æ— æ•™ç»ƒä¿¡æ¯</p></div>';
                }
                
                // Venue Info
                html += '<div class="info-card">';
                html += '<h3>ğŸŸï¸ çƒåœºä¿¡æ¯</h3>';
                html += `<div class="info-item"><span class="info-label">çƒåœºåç§°</span><span class="info-value">${data.venue.name || 'N/A'}</span></div>`;
                html += `<div class="info-item"><span class="info-label">åŸå¸‚</span><span class="info-value">${data.venue.city || 'N/A'}</span></div>`;
                html += `<div class="info-item"><span class="info-label">å®¹é‡</span><span class="info-value">${data.venue.capacity ? data.venue.capacity.toLocaleString() : 'N/A'}</span></div>`;
                html += `<div class="info-item"><span class="info-label">è‰çš®</span><span class="info-value">${data.venue.surface || 'N/A'}</span></div>`;
                if (data.venue.address) {
                    html += `<div class="info-item"><span class="info-label">åœ°å€</span><span class="info-value">${data.venue.address}</span></div>`;
                }
                if (data.venue.image) {
                    html += `<img src="${data.venue.image}" alt="${data.venue.name}" style="margin-top: 15px;">`;
                }
                html += '</div>';
                
                // Trophies
                if (data.trophies && data.trophies.length > 0) {
                    html += '<div class="info-card">';
                    html += '<h3>ğŸ† å¥–æ¯å’Œè£èª‰ (' + data.trophies.length + ')</h3>';
                    data.trophies.forEach(trophy => {
                        html += `<div class="info-item">`;
                        html += `<span class="info-label">${trophy.league}</span>`;
                        html += `<span class="info-value">${trophy.season || ''} ${trophy.times > 1 ? '(' + trophy.times + 'x)' : ''}</span>`;
                        html += `</div>`;
                    });
                    html += '</div>';
                } else {
                    html += '<div class="info-card"><h3>ğŸ† å¥–æ¯å’Œè£èª‰</h3><p>æš‚æ— å¥–æ¯æ•°æ®</p></div>';
                }
                
                // Sidelined Players
                if (data.sidelined && data.sidelined.length > 0) {
                    html += '<div class="info-card">';
                    html += '<h3>ğŸš‘ ä¼¤ç—…/åœèµ›çƒå‘˜ (' + data.sidelined.length + ')</h3>';
                    data.sidelined.forEach(player => {
                        const startDate = player.start_date ? new Date(player.start_date).toLocaleDateString('zh-CN') : 'N/A';
                        const endDate = player.end_date ? new Date(player.end_date).toLocaleDateString('zh-CN') : 'N/A';
                        html += `<div class="info-item">`;
                        html += `<span class="info-label">${player.player_name} (${player.reason})</span>`;
                        html += `<span class="info-value">${startDate} - ${endDate}</span>`;
                        html += `</div>`;
                    });
                    html += '</div>';
                } else {
                    html += '<div class="info-card"><h3>ğŸš‘ ä¼¤ç—…/åœèµ›çƒå‘˜</h3><p>æš‚æ— ä¼¤ç—…æ•°æ®</p></div>';
                }
                
                // Data Source
                html += '<div class="info-card">';
                html += `<h3>ğŸ“Š æ•°æ®æº</h3>`;
                html += `<p><strong>${data.source || 'unknown'}</strong></p>`;
                if (data.source === 'sportmonks') {
                    html += '<p style="color: #00e676;">âœ… ä½¿ç”¨ SportMonks å¢å¼ºæ•°æ®</p>';
                } else {
                    html += '<p style="color: #ffc107;">âš ï¸ ä½¿ç”¨ API-Football æ•°æ®ï¼ˆSportMonks ä¸å¯ç”¨ï¼‰</p>';
                }
                html += '</div>';
                
                // Raw JSON
                html += '<h3 style="margin-top: 20px;">åŸå§‹ JSON æ•°æ®:</h3>';
                html += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = '<p class="error">é”™è¯¯: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
